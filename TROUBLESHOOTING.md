# Устранение неполадок

## ✅ Скрипт рабочий

Скрипт полностью функционален и готов к использованию. Все основные функции реализованы и протестированы.

## Возможные проблемы и решения

### 1. Проблемы с логином

#### "Поле ввода телефона не найдено"
- **Причина**: Изменилась структура страницы hh.ru
- **Решение**: 
  - Убедитесь, что сайт доступен
  - Проверьте, что используете последнюю версию скрипта
  - Возможно, нужно обновить селекторы в функции `login_with_phone()`

#### "Неверный код из SMS"
- **Причина**: Код введён неверно или истёк срок действия
- **Решение**: 
  - Введите код заново
  - Убедитесь, что код актуален (обычно действует 5-10 минут)
  - Используйте интерактивный ввод кода

#### Вход не завершается автоматически
- **Причина**: На hh.ru может потребоваться дополнительное подтверждение
- **Решение**: 
  - Скрипт автоматически пытается найти кнопку подтверждения
  - Если не работает, проверьте в браузере, что происходит после ввода кода
  - Возможно, нужно добавить обработку капчи (если появится)

### 2. Проблемы с поиском

#### "Поле поиска не найдено"
- **Причина**: Изменилась структура страницы
- **Решение**: 
  - Убедитесь, что вы залогинены
  - Попробуйте обновить страницу
  - Проверьте селекторы в функции `search_vacancies()`

#### Не находит вакансии
- **Причина**: Неправильный поисковый запрос или нет результатов
- **Решение**: 
  - Упростите запрос
  - Проверьте запрос вручную на сайте
  - Используйте готовые запросы из `search_queries.py`

### 3. Проблемы с откликами

#### "Кнопка отправки не найдена"
- **Причина**: Изменилась структура модалки отклика
- **Решение**: 
  - Скрипт пробует несколько вариантов селекторов
  - Если не работает, проверьте структуру модалки в браузере
  - Возможно, нужно обновить селекторы в функции `fill_and_submit_cover_letter()`

#### Отклик не отправляется
- **Причина**: Модалка требует дополнительных действий
- **Решение**: 
  - Проверьте, что сопроводительное письмо заполнено
  - Убедитесь, что вакансия не требует теста/вопросов
  - Проверьте логи скрипта для диагностики

#### "Обязательное сопроводительное — пропуск"
- **Причина**: Не указан шаблон письма
- **Решение**: 
  - Используйте параметр `--cover-letter` с файлом или текстом
  - Скрипт автоматически заполнит и отправит письмо

### 4. Проблемы с производительностью

#### Скрипт работает медленно
- **Причина**: Извлечение текстов вакансий или большое количество вакансий
- **Решение**: 
  - Не используйте `--extract-texts` если не нужно
  - Уменьшите `--limit`
  - Скрипт автоматически делает паузы между действиями

#### Браузер зависает
- **Причина**: Слишком много одновременных операций
- **Решение**: 
  - Закройте другие вкладки браузера
  - Уменьшите `--limit`
  - Увеличьте таймауты в коде (если нужно)

## Проверка работоспособности

### Быстрый тест

1. Запустите скрипт с минимальными параметрами:
```bash
python main.py --phone "+79991234567" --limit 1
```

2. Проверьте каждый этап:
   - ✅ Вход выполняется
   - ✅ Поиск работает
   - ✅ Вакансии находятся
   - ✅ Отклики отправляются

### Полный тест

```bash
python main.py \
  --phone "+79991234567" \
  --search-role react_nextjs \
  --cover-letter cover_letter_example.txt \
  --limit 5
```

## Если ничего не помогает

1. **Проверьте версию скрипта** - убедитесь, что используете последнюю версию
2. **Проверьте зависимости** - выполните `pip install -r requirements.txt`
3. **Проверьте браузеры** - выполните `playwright install chromium`
4. **Проверьте логи** - внимательно прочитайте сообщения об ошибках
5. **Проверьте вручную** - откройте hh.ru в браузере и проверьте, что всё работает

## Известные ограничения

- ⚠️ Скрипт не может обойти капчу (если появится)
- ⚠️ Вакансии с тестами/вопросами пропускаются
- ⚠️ Структура сайта может измениться - селекторы могут устареть
- ⚠️ Рекомендуется использовать с разумными лимитами (не более 20-30 откликов за раз)

## Обновление селекторов

Если сайт hh.ru изменился и селекторы устарели:

1. Откройте DevTools в браузере (F12)
2. Найдите нужный элемент на странице
3. Скопируйте его `data-qa` атрибут или другой уникальный селектор
4. Обновите соответствующий селектор в коде

Пример:
```python
# Старый селектор
page.locator('[data-qa="old-selector"]')

# Новый селектор
page.locator('[data-qa="new-selector"]')
```

---

**Важно**: Скрипт работает с текущей версией сайта hh.ru. Если сайт обновится, может потребоваться обновление селекторов.


